---
title: LDAP authentication failing with time-out error | AEM Oak
description: Description
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager
keywords: KCS, ldap, aem, timeout, login, authentication
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Roxann McGlumphy
article-created-date: 12/2/2022 8:58:41 PM
article-published-by: Roxann McGlumphy
article-published-date: 12/2/2022 9:04:47 PM
version-number: 2
article-number: KA-17498
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=9d3b3e19-8472-ed11-9561-6045bd006079
exl-id: c0406e46-0830-4e6a-b321-0d176e7665ad
---
# LDAP authentication failing with time-out error | AEM Oak

## Description {#description}

<br>Issue<br><br>
You have configured [LDAP authentication via AEM](https://docs.adobe.com/docs/en/aem/6-2/administer/security/ldap-config.html) 1 and it is failing to allow LDAP users to log in.  You see the log message below:


| `Caused by: org.apache.directory.api.ldap.model.exception.LdapException: TimeOut occurred``at org.apache.directory.ldap.client.api.LdapNetworkConnection.writeRequest(LdapNetworkConnection.java:4106)``at org.apache.directory.ldap.client.api.LdapNetworkConnection.bindAsync(LdapNetworkConnection.java:1290)``at org.apache.directory.ldap.client.api.LdapNetworkConnection.bind(LdapNetworkConnection.java:1188)``at org.apache.directory.ldap.client.api.AbstractLdapConnection.bind(AbstractLdapConnection.java:127)``at org.apache.directory.ldap.client.api.AbstractLdapConnection.bind(AbstractLdapConnection.java:112)``at org.apache.directory.ldap.client.api.DefaultLdapConnectionFactory.bindConnection(DefaultLdapConnectionFactory.java:64)``at org.apache.directory.ldap.client.api.DefaultLdapConnectionFactory.newLdapConnection(DefaultLdapConnectionFactory.java:107)``at org.apache.directory.ldap.client.api.ValidatingPoolableLdapConnectionFactory.makeObject(ValidatingPoolableLdapConnectionFactory.java:133)``at org.apache.directory.ldap.client.api.ValidatingPoolableLdapConnectionFactory.makeObject(ValidatingPoolableLdapConnectionFactory.java:59)``at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1188)``at org.apache.directory.ldap.client.api.LdapConnectionPool.getConnection(LdapConnectionPool.java:123)``at org.apache.jackrabbit.oak.security.authentication.ldap.impl.LdapIdentityProvider.connect(LdapIdentityProvider.java:771)``... 57 common frames omitted` |
| --- |


1 [https://docs.adobe.com/docs/en/aem/6-2/administer/security/ldap-config.html](https://docs.adobe.com/docs/en/aem/6-2/administer/security/ldap-config.html)
<br><br><br><br> <br><br><br><br><br> <br><br>

## Resolution {#resolution}


Cause
The timeout error usually indicates that the LDAP server is either unreachable by AEM due to a firewall, network issue, or it is down or unresponsive.
<br>Steps to Resolve<br>
To fix the issue, you need to debug the connection from AEM to the LDAP server.  Here are some things to check:

- Check that the LDAP server is accessible from other machines than the AEM server using an LDAP browser such as [JXplorer](http://jxplorer.org/).  If it is not accessible, then it might be down or there could be a network or firewall issue. Contact your network operations team and the team that manages your LDAP servers to investigate.
- If the LDAP server is accessible from other machines then test from the AEM server OS.  Install an LDAP client on the AEM server OS and try to access the ldap server from there.  On Linux, you can use the [ldapsearch](https://access.redhat.com/documentation/en-US/Red_Hat_Directory_Server/8.2/html/Administration_Guide/Examples-of-common-ldapsearches.html) command.  On Windows, use [JXplorer](http://jxplorer.org/).
- If the server can reach the LDAP server, but AEM LDAP-based login is failing then we need to check the "LDAP Identity Provider" configuration.  Log in to the OSGi Web Console (http://*aem-host:port*/system/console/configMgr) and search for "*Apache Jackrabbit Oak LDAP Identity Provider*".  Some things you can try that might solve the issue:
    - Fine tune the "*User base DN*", "*User extra filter*", "*Group base DN*", and "*Group extra filter*" to make the search filter only return relevant users and groups to AEM.
    - Make sure the "*Bind DN*" and "*Bind password*" are correct
    - Uncheck "*Admin pool lookup on validate*" and "*User pool lookup on validate.*"
    - Increase the "*Search Timeout*"


Screenshot ot LDAP Identity Provider configuration:
![rtaimage_3_](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/LDAP-error/jcr%3acontent/main-pars/image/rtaimage_3_.png "rtaimage_3_")
- In case of most enterprise customers, LDAP is often load-balanced. You may also face this problem if the load balancer sitting in front of the LDAP servers have blacklisted your AEM Server IP for some reason. If this problem arises, engage the LDAP team to resolve this problem. As a quick test, you may want to hit the LDAP server IP directly bypassing the LDAP load balancer to see if the LDAP authentication in AEM is successful.
