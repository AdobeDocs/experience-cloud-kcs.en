---

title: "Find out which requests does AEM Dispatcher cache"  
description: Description  
solution: Experience Manager  
product: Experience Manager  
applies-to: "Experience Manager XML Documentation for Adobe Experience Manager,Experience Manager XML Documentation Add-on for Adobe Experience Manager,Experience Manager"  
keywords: "KCS"  
resolution: Resolution  
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/find-out-which-requests-does-aem-dispatcher-cache.html"  
bug: False  
article-created-by: Emily Geary  
article-created-date: "11/17/2020 11:38:15 PM"  
article-published-by: Emily Geary  
article-published-date: "11/17/2020 11:45:35 PM"  
version-number: 1  
article-number: KA-16551  
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=d0a831f6-2d29-eb11-a813-000d3a303484"

---

# Find out which requests does AEM Dispatcher cache

## Description


Question



Which HTTP requests and responses do AEM Dispatcher cache?


Environment



AEM Dispatcher 4.3.3

## Resolution

The documentation covers the most important scenarios that affect the cache-ability of requests and responses which go through the AEM Dispatcher module. All cache rules are not covered.

HTTP Request & Caching Rules:

For an HTTP request to be cacheable by the dispatcher, it must adhere to the following rules.

1. URL IS ABSOLUTE (NOT STARTING WITH . OR ..), HAS A FILE EXTENSION AND THE FILENAME IN THE URL WORKS AS A FILE ON THE FILE SYSTEM.

Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

URI not canonical: %s.

Unable to map URI to file: %s.

cache file path too long

temporary file path too long

request URL has no extension

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>/content/test</td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>/content/test.html</td>
   <td>cached</td>
  </tr>
 </tbody>
</table>

2. IT HAS NO SLASHES AFTER THE FIRST FILE EXTENSION.



Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

request URL has trailing slash

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>/content/test.html/</td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>/content/test.html/foo.jpg</td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>/content/test.html</td>
   <td>cached</td>
  </tr>
 </tbody>
</table>



3. IT USES HTTP GET OR HEAD METHOD.

Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

request method is neither GET nor HEAD

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>HEAD /content/test.html HTTP/1.1</td>
   <td>cached</td>
  </tr>
  <tr>
   <td>GET /content/dam/test.jpg HTTP/1.1</td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>POST /content/test.html HTTP/1.1</td>
   <td>not cached</td>
  </tr>
 </tbody>
</table>



4. THE REQUEST IS DENIED BY /CACHE = /RULES DEFINED IN THE DISPATCHER .ANY FARM CONFIGURATION.

Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

URI not in cache rules: %s

request URL not in cache rules

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

Farm has /cache = /rules and a request is received for /content/test.html

/cache

{

  ...

  /rules

  {

    /0001 {

      type "deny"

      glob "*"

  }

}

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

Farm has /cache = /rules and a request is received for /content/test.html

/cache

{

  ...

  /rules

  {

    /0001 {

      type "allow"

      glob "*"

  }

}

   </td>
   <td>cached</td>
  </tr>
 </tbody>
</table>



5. THE HTTP REQUEST DOES NOT CONTAIN AN AUTHORIZATION HEADER OR IT CONTAINS THE HEADER BUT /ALLOWAUTHORIZED IS SET TO 1 IN THE FARM CONFIGURATION.

Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

request contains authorization

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html HTTP/1.1 Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l

dispatcher.any farm /cache = /allowAuthorized configuration:

/cache {   /allowAuthorized "0" }

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html HTTP/1.1 Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l

dispatcher.any farm /cache = /allowAuthorized configuration:

/cache {   /allowAuthorized "1" }

   </td>
   <td>cached</td>
  </tr>
 </tbody>
</table>

6. THE HTTP REQUEST CONTAINS LOGIN-TOKEN OR AUTHORIZATION COOKIE IN THE COOKIE HEADER OR IT CONTAINS EITHER (OR BOTH) OF THOSE COOKIES AND /ALLOWAUTHORIZED IS SET TO 1 IN THE FARM CONFIGURATION.



Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

request contains authorization

   </td>
  </tr>
 </tbody>
</table>



Examples:

Related log message:

Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html HTTP/1.1 Cookie: login-token=...

dispatcher.any farm /cache = /allowAuthorized configuration:

/cache {   /allowAuthorized "0" }

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html HTTP/1.1 Cookie: authorization=YWxhZGRpbjpvcGVuc2VzYW1l

dispatcher.any farm /cache = /allowAuthorized configuration:

/cache {   /allowAuthorized "0" }

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html HTTP/1.1 Cookie: login-token=...

dispatcher.any farm /cache = /allowAuthorized configuration:

/cache {   /allowAuthorized "1" }

   </td>
   <td>cached</td>
  </tr>
 </tbody>
</table>

7. THERE'S A QUERYSTRING PARAMETER IN THE URL AND THE PARAMETER IS ALLOWED TO BE IGNORED VIA THE FARM'S /IGNOREURLPARAMS CONFIGURATION.



Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

request contains a query string

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html?test=1 HTTP/1.1

Farm /cache configuration:

/ignoreUrlParams {    /0001 { /type "allow" /glob "*" }  }

   </td>
   <td>cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html?test=1 HTTP/1.1

Farm /cache configuration:

/ignoreUrlParams {    /0001 { /type "deny" /glob "*" }     /0001 { /type "allow" /glob "test" } }

   </td>
   <td>cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

GET /content/test.html?test=1 HTTP/1.1

dispatcher.any farm /cache = /allowAuthorized configuration:

/ignoreUrlParams {    /0001 { /type "deny" /glob "*" }     /0001 { /type "allow" /glob "q" } }

   </td>
   <td>not cached</td>
  </tr>
 </tbody>
</table>

HTTP Response & Caching Rules:



The HTTP response returned from AEM is cacheable if the following criteria is met.

1. THE DISPATCHER IS ABLE TO SEND AND RECEIVE A 200 OK RESPONSE FROM THE ONE OF THE DEFINED "RENDERS".


Note: If no [/timeout](https://helpx.adobe.com/experience-manager/dispatcher/using/dispatcher-configuration.html#DefiningPageRenderersrenders) is set on the /renders or it is set to 0 then it would wait forever for a connection to the AEM instance even if the instance is down.



Related log messages:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

Unable to send request to remote server.

Unable to receive response from remote server.

Remote server returned: %s

No backend available.

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Request:

200 OK

   </td>
   <td>cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Request:

404 Page Not Found

   </td>
   <td>not cached</td>
  </tr>
 </tbody>
</table>

2. NONE OF THESE RESPONSE HEADERS ARE PRESENT IN THE RESPONSE:



*   Dispatcher: no-cache
 
*   Cache-control: no-cache
 
*   Pragma: no-cache




Related log message:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

Backend forbids caching: %s, sent: %s"

response contains no_cache

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Response:

200 OK Dispatcher: no-cache

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Response:

200 OK Cache-control: no-cache

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Response:

200 OK Pragma: no-cache

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Response:

200 OK

   </td>
   <td>cached</td>
  </tr>
 </tbody>
</table>

3. CONTENT-LENGTH VALUE IS GREATER THAN ZERO BYTES.



Related log message:


<table border="0" cellpadding="0" cellspacing="0">
 <tbody>
  <tr>
   <td>
   

response content length is zero

   </td>
  </tr>
 </tbody>
</table>



Examples:


<table border="1" cellpadding="1" cellspacing="0" style="width:100%">
 <tbody>
  <tr>
   <td>
   

HTTP Response:

200 OK Content-Length: 0

   </td>
   <td>not cached</td>
  </tr>
  <tr>
   <td>
   

HTTP Response:

200 OK Content-Length: 3120

   </td>
   <td>cached</td>
  </tr>
 </tbody>
</table>

 
