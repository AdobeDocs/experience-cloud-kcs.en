---
title: Issues when running workflow to Export Audiences from AC to AAM using "[!UICONTROL Update shared audience]" Activity
description: Description
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign
keywords: KCS, running workflow to Export Audiences, from AC to AAM, "update shared audience" activity, Adobe Campaign Classic, Adobe Campaign
resolution: Resolution
internal-notes: Tickets TK214093, TK128191 and TK168481.
bug: false
article-created-by: Jim Menn
article-created-date: 9/20/2022 8:24:53 AM
article-published-by: Jim Menn
article-published-date: 9/20/2022 8:45:07 AM
version-number: 3
article-number: KA-15393
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=e791d9af-bd38-ed11-9db1-0022480866ad
exl-id: 4282de93-0cd3-4f00-b08c-289bea7f1ae9
---
# Issues when running workflow to Export Audiences from AC to AAM using "[!UICONTROL Update shared audience]" Activity

## Description


<b>Environment</b>
 Adobe Campaign Classic
 Adobe Campaign

<b>Issue</b>
 When integrating AC and Audience Manager and running workflow to Export Audiences from AC to AAM using "Update shared audience" activity, the workflow fails with a similar error to this:


```
exportToAAM    XTK-170016 You are not authorized to use SQL expressions. 'digest' cannot be processed.
```

<br><br> <br><br> <br>

## Resolution


<b>Solution</b>

This error often occurs when there is encryption set at AMC-datasource, or the encrypted-Identifier is using a reconciliation key.


You can check the AMC-datasource and make sure to check the encryption (setting it to *none* sometimes helps), and also the encrypted-Identifier can not be used as a reconciliation key.


The problem may come from the fact that the digest function is being used directly without the table name.

Ideally the function should be referred to as `nmsrecipient.digest()` instead of `digest()` directly.


The same solution has been provided in a Microsoft forum post: [https://social.msdn.microsoft.com/Forums/sqlserver/en-US/66a6e3db-3ec6-4214-9d2f-a6a532a37db5/execution-error-the-function-name-is-not-a-recognized-builtin-function-name?forum=sqldatabaseengine](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/66a6e3db-3ec6-4214-9d2f-a6a532a37db5/execution-error-the-function-name-is-not-a-recognized-builtin-function-name?forum=sqldatabaseengine).


To resolve this, you need to select encryption method to *none* in the [!UICONTROL AMC data sources] folder under <b>Administration</b><b>Platform</b> as mentioned above.
